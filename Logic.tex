\documentclass[a4paper,oneside,11pt,DIV=12,parskip=half]{scrartcl}
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{microtype}
\usepackage{lmodern}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{showlabels}
\usepackage{amsthm}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{enumerate}
\usepackage[usenames, dvipsnames]{color}
\usepackage{hyperref}

\title{Logic}
\author{ Luka Ili\'{c}}


\newcommand{\R}{\mathbb R}
\newcommand{\N}{\mathbb N}
\newcommand{\E}{\mathcal E}
\newcommand{\J}{\mathcal J}

\newcommand{\pmat}[1]{\begin{pmatrix}
		#1
\end{pmatrix}}
\newcommand{\abs}[1]{\left| #1\right|}

\newcommand{\skal}[1]{\left \langle #1 \right\rangle}


\DeclareMathOperator{\grad}{grad}

\theoremstyle{plain}
\newtheorem{theorem}{Theorem.}[section]
\newtheorem{lemma}[theorem]{Lemma.} 
\newtheorem{proposition}[theorem]{Proposition.}  
\newtheorem{corollary}[theorem]{Corollary.}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition.}
\newtheorem{remark, definition}[theorem]{Remark and Definition.}
\newtheorem{lemma, definition}[theorem]{Lemma and Definition.}  
\newtheorem{theorem, definition}[theorem]{Theorem and Definition.}  

\theoremstyle{remark}
\newtheorem*{remark}{\textbf{Remark}}
\newtheorem*{exercise}{\textbf{Exercise}}
\newtheorem*{example}{\textbf{Example}}
\newtheorem*{remark, example}{\textbf{Remark and Exercise}} 


\begin{document}

\maketitle

\pagebreak

\tableofcontents

\pagebreak

\section*{Preface}
The following notes, are to be regarded as such -- notes. They should contain most of what is written down in the logic lecture at Imperial College London (2018) by professor Evans. More likely then not, there will be a considerable amount of spelling errors (--please report everything to email down below or in Github comments--) that hopefully do not alter any important meaning. These notes will be constantly reread (by you the readers as well as myself) so I hope that at the end of the term most errors will be corrected so that anybody reading this will find good lecture notes for the exam.

\textbf{At the moment I still have problems with my labels so if you need to jump to a reference, just click on it}

\textbf{Anybody willing to help me, can write me an email at \\
\\ luka.ilic18@imperial.ac.uk} \\ \\ Help will only consist of being able to edit errors yourself. (So no need for any texing, except if you really want to.)

This is a project for my fellow students, so I hope it will be appreciated and used. I wish everybody reading this a lot of fun with the following content.

\pagebreak

\section{Propositional logic}

\subsection{Truth functions}
Convention: In this course we write $T$ for true and $F$ for false.

\begin{definition}
	The alphabet of propositional logic consists of following symbols:
 \emph{propositional variables} denoted (mostly) by $ p,q, \dots $ or 	$p_1,p_2,\dots, q_1, q_2, \dots$
	and the \emph{connectives} $\land, \lor, \lnot, \rightarrow, \leftrightarrow$.
\end{definition}

\begin{definition}\label{Def:formula}
	A \emph{propositional formula} is a string of symbols obtained in the following way:
\begin{enumerate}
\item Any variable is a formula. \\
\item If $\phi $ and $\psi$ are formulas then so are
$(\phi \land \psi),(\phi \lor \psi), (\lnot \phi), (\phi \rightarrow \psi), (\phi \leftrightarrow \psi)$.
\item Any formula is obtained in this way.
\end{enumerate}
\end{definition}

\begin{definition}
A \emph{truth function} of $n$ variables is a function 
	\[ f: \{ T,F \}^n \rightarrow \{ T,F \} \quad. \]
\end{definition}

\begin{exercise} 
How many functions are there for $n$ variables?

\end{exercise}

\begin{definition}
Suppose $\phi$ is a formula with variables $p_1, \dots, p_n$ then we obtain a truth function $F_{\phi}: \{T,F\}^n \rightarrow \{T,F\}$ whose value at $(x_1, \dots, x_n) \quad x_i \in \{T,F\} $ is the truth value of $\phi$ when $p_i$ has value $x_i$. The function $F_{\phi}$ is the \emph{truth function of $\phi$}.
\end{definition}

\begin{remark} The truth tables for the connectives are the following:
\begin{center}
\begin{tabular}{c|c}
     $p$ &  $\lnot p$  \\
     \hline
      $T$ & $F$ \\
      $F$ & $T$ \\
\end{tabular} \quad
\begin{tabular}{c|c|c}
     $p$ & $q$ & $p \land q$  \\
     \hline
     $T$ & $T$ & $T$ \\
     $T$ & $F$ & $F$ \\
     $F$ & $T$ & $F$ \\
     $F$ & $F$ & $F$ \\
\end{tabular} \\
\begin{tabular}{c|c|c}
     $p$ & $q$ & $p \lor q$  \\
     \hline
     $T$ & $T$ & $T$ \\
     $T$ & $F$ & $T$ \\
     $F$ & $T$ & $T$ \\
     $F$ & $F$ & $F$ \\
\end{tabular} \quad
\begin{tabular}{c|c|c}
     $p$ & $q$ & $p \rightarrow q$  \\
     \hline
     $T$ & $T$ & $T$ \\
     $T$ & $F$ & $F$ \\
     $F$ & $T$ & $T$ \\
     $F$ & $F$ & $T$ \\
\end{tabular} \quad
\begin{tabular}{c|c|c}
     $p$ & $q$ & $p \leftrightarrow q$  \\
     \hline
     $T$ & $T$ & $T$ \\
     $T$ & $F$ & $F$ \\
     $F$ & $T$ & $F$ \\
     $F$ & $F$ & $T$ \\
\end{tabular} .
\end{center}
\end{remark}

\begin{example}
What is the truth function of 
\[ (((p \rightarrow q) \land (q \rightarrow (\lnot p))) \rightarrow (\lnot p)) \quad ? \]

\end{example}

\begin{definition}
A propositional formula $\phi$ whose truth function $F_{\phi}$ is always true is called \emph{tautology}.
Say that formulas $\phi, \psi$ are \emph{logically equivalent} (l.e.) if they have the same truth function.
\end{definition}

\begin{remark}
$\phi,\psi$ are l.e. iff $(\phi \leftrightarrow \psi)$ is a tautology.
Also, suppose that we got some formula $\phi$ with variables $p_1, \dots, p_n$ and $\phi_1,\dots,\phi_n$ are formulas with variables $q_1, \dots, q_r$.
For each $i \leq n$ substitute $\phi$ in place of $p_i$ in $\phi$. Then the result is a formula $ \psi$ and if $\phi$ is a tautology, then so is $\psi$.
\end{remark}

\begin{proof}
The first statement is easy. For the second remark that
	\[ F_{\psi}(q_1, \dots, q_r) = F_{\phi}(F_{\phi_1}(q_1, \dots, q_r), \dots, F_{\phi_n}(q_1, \dots, q_r)) \]
by induction on the number of connectives in $\phi$.
\end{proof}

\begin{example}
\begin{enumerate}
\item $(p_1 \land ( p_2 \land p_3))$ is l.e. to $((p_1 \land p_2) \land p_3)$,
\item same with $ \lor $,
\item $(p_1 \lor (p_2 \land p_3))$ is l.e. to $((p_1 \lor p_2) \land (p_1 \lor p_3))$ 
\item similar the other way around.
\item etc.

\end{enumerate}
\end{example}

\begin{remark}
Note that by the remark above, we can boost these equivalences by substituting formulas for the variables.
\end{remark}

\begin{definition}

Say that a set of connectives is \emph{adequate} if for every $n \geq 1$, every truth function of $n$ variables is the truth function of some formula which involves only connectives from the set and variables $p_1, \dots, p_n$.
\end{definition}

\begin{theorem}\label{Th:connectives}
The set $\{ \lnot, \land, \lor\}$ is adequate. 
\end{theorem}

\begin{proof}
Let $G: \{T,F\}^n \rightarrow \{T,F\}$
\begin{enumerate}
\item $G(v) = F$ for all $v \in \{T,F\}$.
Take $\phi$ to be $(p_1 \land(\lnot p_1))$ then $ G = F_{\phi}$
\item (\emph{Disjunctive Normal Form}
List the $v \in \{ T,F \}^n$ with $G(v) = T$ as $v_1, \dots, v_r$.
Write $v_i = (v_{i1},\dots,v_{in})$
Define
\[ q_{ij} = \begin{cases} p_j &\text{if } v_{ij} = T \\  ( \lnot p_j) &\text{if } v_{ij} = F
\end{cases}\]
So $q_{ij}$ has value $T$ iff $p_j$ has value $v_{ij}$.
Let $\psi_i$ be
	\[ (q_{i1}, \dots, q_{in})\]
Then $F_{\psi_i}(v) = T$ iff each $q_{ij}$ has value $T$ iff $v = v_i$.

Let $\theta$ be $(\phi_1 \lor, \dots , \lor \phi_r)$.
Then $F_{\theta}(v) = T$ iff $F_{\psi_i}(v) = T$ for some $i$ which is equivalent to $v = v_i$ for some $i \leq r$.
Thus $F_{\theta} (v) = T$ iff $G(v) = T$ i.e. $F_{\theta} = G$.
As $\theta$ was constructed using only $\lnot,\lor,\land$ the statement follows.
\end{enumerate}

\end{proof}

\begin{definition}
A formula in the form as $\theta$ in the proof above (\ref{Th:connectives}) is said to be in \emph{disjunctive normal form (dnf)}.
\end{definition}

\begin{remark}

Apart from the very intuitive and useful dnf, having a small adequate set at our disposal is useful for the following reason. It shortens induction proofs over the structure of formulas by a considerable amount, as the reader will surely experience in due time.

\end{remark}

\begin{corollary} Suppose $\chi$ is a formula which truth function is not always false. Then $\chi$ is l.e. to a formula in dnf.
\end{corollary}

\begin{proof}
Take $G = F_{\chi}$ and apply the second case from the proof above.
\end{proof}
\begin{example} For
\[ \chi: \quad (( p_1 \rightarrow p_2) \rightarrow (\lnot p_2)) \] 
the truth function $F_{\chi}(v)$ is true precisely when $v = \{T,F\}$ or $ v = \{F, F \}$.
Hence the dnf is:
\[ ((p_1 \land (\lnot p_2)) \lor ((\lnot p_1) \land ( \lnot p_2))). \]

\end{example}

\begin{corollary}
The following sets of connectives are adequate:
\begin{enumerate}
    \item $\lnot, \lor$
    \item $\lnot, \land$
    \item $\lnot, \rightarrow$.
\end{enumerate}
\end{corollary}

\begin{proof}
\begin{enumerate}
    \item By \ref{Th:connectives} we just need to show, that $\land$ can be expressed using $\lnot,\lor$. $(p \land q)$ is l.e. to $(\lnot((\lnot p) \lor (\lnot q))$.
    \item similar to the approach above. $(p \lor q)$ is l.e. to $(\lnot((\lnot p) \land (\lnot q))$.
    \item Due to the cases above, it suffices to express either $\land$ or $\lor$ using $\lnot,\rightarrow$. $(p \lor q)$ is l.e. to $((\lnot p) \rightarrow  q)$.
\end{enumerate}
\end{proof}

\begin{example}

Some sets of connectives that are not adequate are:
\begin{enumerate}
    \item $\land, \lor$
    \item $\lnot,\leftrightarrow$
\end{enumerate}
\begin{proof}
\begin{enumerate}
    \item If $\phi$ is build using $\land,\lor$ then 
    $F_\phi(T,\dots,T) = T$ as proven by induction over number of connectives.
    \item exercise.
\end{enumerate}
\end{proof}
\end{example}

\begin{example}
The \emph{NOR} connective $\downarrow$ has truth table:
    \begin{tabular}{c|c|c}
        $p$ & $q$ & $(p \downarrow q)$ \\
        \hline
        $T$ & $T$ & $F$ \\ 
        $T$ & $F$ & $F$ \\
        $F$ & $T$ & $F$ \\
        $F$ & $F$ & $T$ \\
        
    \end{tabular}
    It is adequate on its own. (exercise - express $\lnot, \land$)
\end{example}

\subsection{A formal system for propositional logic}

Idea: Try to generate all tautologies from certain basic assumptions (axioms) using appropriate deduction rules.

\begin{definition}
\textbf{This is important!}

A \emph{formal deduction system} $\Sigma$ has the following ingredients:
\begin{enumerate}
    \item An \emph{alphabet} $A$ of symbols $(A \neq \emptyset)$.
    \item A non empty set $\mathcal{J}$ of the set of all finite sequences (`strings`) of the elements of A: the \emph{formulas} of $\Sigma$.
    \item A subset $\mathcal{A} \subseteq \mathcal{J}$ called the \emph{axioms} of $\Sigma$. 
    \item A collection of \emph{deduction rules}.
\end{enumerate}
\end{definition}

\begin{definition}
A \emph{proof} in $\Sigma$ us a finite sequence of formulas in $\mathcal{J}$ \[ \phi_1,\dots,\phi_n \] such that each $ \phi_i $ is either an axiom \emph{or} is obtained from $ \phi_1, \dots, \phi_{i-1} $ using one of the deduction rules. The last (or any) formula in a proof is a \emph{theorem} of $\Sigma$.
Write $\vdash_\Sigma \phi$ for `$\phi$ is a theorem of $\Sigma$`. 
\end{definition}

\begin{remark}
\begin{enumerate}
    \item If $\phi \in \mathcal{A}$ then $\vdash_\Sigma \phi$.
    \item We should have an algorithm to test whether a string of symbols really is a formula and whether it is an axiom. Then someone who is willing to follow an algorithm precisely (computer) should be able to generate all possible proofs in $\sigma$ and check whether something is a proof. (We say $\Sigma$ is \emph{recursive} in this case.)
\end{enumerate}
\end{remark}

\begin{definition}
The formal system $L$ for propositional logic consists of:

\begin{itemize}
    \item \textbf{Alphabet}: variables $p_1,p_2,p_3\dots$  connectives $\lnot,\rightarrow$
    punctuation ),(.
    \item \textbf{Formulas}: as defined in \ref{Def:formula} and will be called \emph{$L$-formulas}.
    \item \textbf{Axioms}: Suppose $\phi,\psi,\chi$ are $L$-formulas. The following are axioms of $L$:
    \begin{itemize}
        \item[A1] $(\phi \rightarrow (\psi \rightarrow \phi))$
        \item[A2] $((\phi \rightarrow (\psi \rightarrow \chi)) \rightarrow ((\phi \rightarrow \psi) \rightarrow (\psi \rightarrow \chi)))$
        \item[A3]: $(((\lnot \psi) \rightarrow ( \lnot \phi)) \rightarrow (\phi \rightarrow \psi))$
    \end{itemize}
    \item \textbf{deduction rule}: \emph{ Modus Ponens (MP)} from $\phi,  (\phi \rightarrow \psi)$ deduce $\psi$.
\end{itemize}

\begin{example} \label{rem:phi_implies_phi}

Suppose $\phi$ is an $L$-formula. Then $\vdash_L (\phi \rightarrow \phi)$.
A proof in $L$ could be as follows:
\begin{enumerate}
    \item $(\phi \rightarrow ((\phi \rightarrow \phi) \rightarrow \phi))$ use A1
    \item $(\chi \rightarrow (\phi \rightarrow ((\phi \rightarrow \phi) \rightarrow \phi)))$ use A1 and MP
    \item $((\phi \rightarrow (\phi \rightarrow \phi)) \rightarrow (\phi \rightarrow \phi))$
    \item $(\phi \rightarrow (\phi \rightarrow \phi))$
    \item $(\phi \rightarrow \phi)$.
\end{enumerate}
\end{example}
\end{definition}

\begin{definition}

Suppose $\Gamma$ is a set of $L$- formulas. A deduction from $\Gamma$ is a finite sequence of formulas of $L$-formulas $\phi_1,\dots,\phi_n$ such that each one of these $\phi_i$ is either
\begin{itemize}
    \item an axiom
    \item a formula in $\Gamma$ or
    \item is obtained from previous formulas $\phi_1,\dots,\phi_{i-1}$ using the deduction rule (MP).
\end{itemize}
Write $\Gamma \vdash_L \phi$ if there is a deduction from $\Gamma$ ending in $\phi$.

Say $\Gamma$ is a \emph{consequence} of $\Gamma$.
\end{definition}

\begin{remark}
Being a consequence of the empty set ($\Gamma = \emptyset$) is the same as being a theorem of $L$. ($\emptyset \vdash_L \phi \Leftrightarrow \vdash_L \phi$)
\end{remark}

\begin{theorem}[Deduction Theorem.]\label{Th:deduction}
Suppose $\Gamma$ is a set of $L$-formulas and $phi,\psi$ are $L$-formulas. Suppose
    \[ \Gamma \cup \{\phi\} \vdash \psi \] then
    \[ \Gamma \vdash_L (\phi \rightarrow \psi) \].
\end{theorem}

\begin{corollary}
Suppose $\phi,\psi,\chi$ are $L$-formulas such that $ \vdash_L (\phi \rightarrow \psi)$ and $ \vdash_L (\psi \rightarrow \chi)$. Then $ \vdash_L (\phi \rightarrow \chi)$
\end{corollary}

\begin{proof}
Use \ref{Th:deduction} with $\Gamma = \emptyset$: Show $\{\phi\} \vdash_L \chi$. Here is a deduction of $chi$ from $phi$:
\begin{enumerate}
    \item $(phi \rightarrow \psi)$ (theorem of $L$)
    \item $(\psi \rightarrow \chi)$ (theorem of $L$)
    \item $\phi$ (assumption)
    \item $\psi$ (MP)
    \item $\chi$ (MP).
\end{enumerate}
Thus $\{phi\} \vdash_L \chi$.
By \ref{Th:deduction}: $\emptyset \vdash_L (\phi \rightarrow \chi)$ i.e. $ \vdash_L (\phi \rightarrow \chi) $.
\end{proof}

\begin{lemma}
Suppose $\phi,\psi$ are $L$-formulas. Then
\begin{enumerate}
    \item $\vdash_L ((\lnot \psi) \rightarrow (\psi \rightarrow \phi))$.
    \item $\{(\lnot \psi),\psi\} \vdash_L \phi$.
    \item $\vdash_L (((\lnot \phi) \rightarrow \phi) \rightarrow \phi)$
\end{enumerate}
\end{lemma}

\begin{proof}
\begin{enumerate}
    \item problem sheet 1.
    \item by 1. and MP (twice)
    \item Suppose $\chi$ is any formula. Then $\{(\lnot \phi),((\lnot \phi) \rightarrow \phi) \} \vdash_L \chi$\label{frm:1} (by MP and 2.) 
    Let $\alpha$ be any axiom and let $\chi$ be $(\lnot \alpha)$.
    Apply \ref{Th:deduction} to \ref{frm:1} to get:
    \[ \{((\lnot \phi) \rightarrow \phi)\} \vdash_L ((\lnot \phi) \rightarrow (\lnot \alpha)) \]
    A3: $(((\lnot \psi) \rightarrow ( \lnot \phi)) \rightarrow (\phi \rightarrow \psi))$ and MP generate:
    \[ \{((\lnot \phi) \rightarrow \phi)\} \vdash_L ( \alpha \rightarrow \phi) \quad. \]
    Since $\alpha$ is an axiom, by MP
        \[ \{((\lnot \phi) \rightarrow \phi)\} \vdash_L \phi \] and the application of \ref{Th:deduction} gives us:
        \[ \vdash_L (((\lnot \phi) \rightarrow \phi) \rightarrow \phi) \quad. \]
\end{enumerate}

\end{proof}

\begin{proof}[Proof of \ref{Th:deduction}:]
Suppose $\Gamma \cup \{\phi\} \vdash_L \psi$ using a deduction of length n. Show by induction on $n$ that $\Gamma \vdash_L (\phi \rightarrow \psi).$
\begin{itemize}
    \item[Base step:] $n = 1$. In this case $\phi$ is either an axiom or in $\Gamma$ or is $phi$. In the first two cases $\Gamma \vdash_L \phi$ (one line deduction!) Using the A1 axiom $(\psi \rightarrow (\phi \rightarrow \psi))$ and MP we obtain $\Gamma \vdash_L (\phi \rightarrow \psi)$.
    In the last case -- that $\phi = \psi$ -- we already know 
     \[ \Gamma \vdash (\phi \rightarrow \phi) \text{ by (\ref{rem:phi_implies_phi}.)} \]
    
     \item[induction step:] In our deduction of $\psi$ from $\Gamma \cup \{\phi\}$ either $\psi$ is an axiom or $\psi$ is obtained from earlier steps using MP. In the last case these are formulas $\chi, (\chi \rightarrow \psi)$ earlier in the deduction.
     in the first case we argue as in the base case to get $\Gamma \vdash_L (\phi \rightarrow \psi)$.
     Otherwise we use the inductive hypothesis to get $$\Gamma \vdash_L (\phi \rightarrow \chi)$$ and 
        \[ \Gamma \vdash_L (\phi \rightarrow (\chi \rightarrow \psi)). \]
    We have the A2 axiom 
        \[ ((\phi \rightarrow (\psi \rightarrow \chi)) \rightarrow ((\phi \rightarrow \psi) \rightarrow (\psi \rightarrow \chi))) \]
    Using the two formulas we obtained, this axiom and MP twice we obtain $\Gamma \vdash_L (\phi \rightarrow \psi)$ as required, completing the induction step.
\end{itemize}
\end{proof}

\subsection{soundness and completeness of L}

\begin{theorem}[soundness of L] \label{Th:soundness}
Suppose $\phi$ is a theorem of $L$. Then $\phi$ is a tautology.
\end{theorem}
\begin{remark}[notation]
 A (propositional) \emph{valuation} $v$ is an assignment of truth values to the propositional variables $p_1,p_2,\dots$ .
 So $v(p_i) \in \{ T, F \}$ (for $i \in \N)$.
 Note that, using the truth table rules, this assigns a truth value $v(\phi) \in \{ T, F \}$ to every $L$-formula $\phi$.
\end{remark}

\begin{proof}[Proof of \ref{Th:soundness}:] By the induction on the length of a proof of $\phi$ it is enough to show:
\begin{enumerate}
    \item every axiom is a tautology;
    \item MP preserves tautologies. I.e. if $\psi,(\psi \rightarrow \chi)$ are tautologies, then so is $\chi$.
\end{enumerate}
For 1. use truth tables or argue as follows:
\begin{itemize}
    \item [A2] Suppose for 1. if there is a valuation $v$ with \[ v(((\phi \rightarrow (\psi \rightarrow \chi)) \rightarrow ((\phi \rightarrow \psi) \rightarrow (\psi \rightarrow \chi)))) = F \]
    Then \[ v((\phi \rightarrow (\psi \rightarrow \chi))) = T \] and 
        \[ v(((\phi \rightarrow \psi) \rightarrow (\psi \rightarrow \chi))) = F \]
    
    $v((\phi \rightarrow \psi) = T$ and $v((\phi \rightarrow \chi)) = F$
    So by the last equality $v(\phi) = T, v(\chi) = F$ and also $(\psi) = T$ which contradicts the first equation.
    \item[A1] exercise
    \item[A3] exercise
\end{itemize}
For 2. if $v$ is a valuation and $v(\psi) = T + v(\psi \rightarrow \chi) = T$ then $v(\chi) = T$.

\end{proof}

\begin{theorem}[Generalization of soundness]

Suppose $\Gamma$ is a set of formulas and $\phi$ is a formula with $\Gamma \vdash_L \phi$. Suppose $v$ is a valuation with $v(\phi) = T$ for all $\phi \in \Gamma$. Then $v(\phi) = T$.
\end{theorem}
\begin{proof}
exercise
\end{proof}

\begin{theorem}[Completeness Theorem for L.]
Suppose $\phi$ is a tautology. Then $\vdash_L \phi$.

\end{theorem}

\begin{remark}[steps in the proof]
\begin{enumerate}
    \item 
 If $v(\phi) = T$ for all valuations $v$ -- we want to show $\vdash_L \phi$.
    \item Try to prove a generalization: Suppose that for every $v$ with $v(\Gamma) = T$ (i.e. $v(\phi) = T \forall \phi \in \Gamma$) we have $v(\phi) = T$. Then $\Gamma \vdash_L \phi$.
    \item Equivalently, if $\Gamma \not \vdash_L \phi$ show there is a valuation $v$ with $v(\Gamma) = T$ and $v(\phi) = F$.
\end{enumerate}
\end{remark}

\begin{definition}
A set $\Gamma$ of $L$- formulas is \emph{consistent} if there is no $L$-formula $\phi$ with
    \[\Gamma \vdash_L \phi \text{ and } \Gamma \vdash_L (\lnot \phi) \quad . \]
\end{definition}

\begin{proposition}\label{TH:extension}
Suppose $\Gamma$ is a consistent set of $L$-formulas and $\Gamma \not \vdash_L \phi$. Then $\Gamma \cup \{(\lnot \phi)\}$ is consistent.
\end{proposition}
\begin{proof}
Suppose not. So there is some formula $\psi$ with
\[ \Gamma \cup \{(\lnot \phi) \} \vdash_L \psi \] and
\[ \Gamma \cup \{(\lnot \phi) \} \vdash_L (\lnot \psi) \]
Apply \ref{Th:deduction} to the second line above, then
\[ \Gamma \vdash_L ((\lnot \phi) \rightarrow (\lnot \psi)). \]
By A3 and MP we obtain
\[ \Gamma \vdash_L (\psi \rightarrow \psi). \]
Then $\Gamma \cup \{(\lnot \phi) \} \vdash_L \phi$. By \ref{Th:deduction}: 
\[ \Gamma \vdash_L ((\lnot \phi) \rightarrow (\lnot \phi)  \]
and by a result from above
    \[ \vdash_L (((\lnot \phi) \rightarrow \phi) \rightarrow \phi) \]
So by this, $ \Gamma \vdash_L ((\lnot \phi) \rightarrow (\lnot \phi)$   and Modus Ponens we obtain
\[ \Gamma \vdash_L \phi. \]
This contradicts $\Gamma \not \vdash_L \phi$.
\end{proof}

\begin{proposition}[Lindenbaum Lemma]
Suppose $\Gamma$ is a consistent set of $L$-formulas. Then there is a consistent set of formulas
$ \Gamma^* \supseteq \Gamma$ such that for every $\phi$ either
    \[\Gamma^* \vdash_L \phi \] or
    \[\Gamma^* \vdash_L (\lnot \phi) \quad . \]
    (sometimes say $\Gamma^*$ is \emph{complete}.) 
\end{proposition}

\begin{proof}
The set of all $L$-formulas is \emph{countable}, so we can list the $L$-formulas as $\phi_0,\phi_1,\dots$.
(Why countable? Alphabet is countable: $\lnot, \rightarrow,),(,p_1,p_2,\dots$. Formulas are finite sequences from this alphabet, hence only countably many.)
Define inductively sets of $L$-formulas $\Gamma_0 \subseteq \Gamma_1 \subseteq \Gamma_2\subseteq \dots$, where 
\[ \Gamma_0 = \Gamma\] and \[\Gamma^* = \bigcup_{i \in \N} \Gamma_i \quad .\] Suppose $\Gamma_n$ has been defined. If $\Gamma_n \vdash_L \phi_n$ then let $\Gamma_{n+1} := \Gamma_n$.
Otherwise, if $\Gamma_n \not \vdash_L \phi_n$ then let $\Gamma_{n+1} := \Gamma_n \cup \{(\lnot \phi_n)\}$. An easy induction using \ref{TH:extension} shows that each $\Gamma_i$ is consistent.
\\
\textbf{Claim:}: $\Gamma^*$ is consistent.
If $\Gamma^* \vdash_L \phi$ and $\Gamma^* \vdash_L (\lnot \phi)$ then as deductions are finite sequences of $L$ -formulas \[ \Gamma_n \vdash_L \phi \text{ and } \Gamma_n \vdash_L (\lnot \phi) \] for some $n \in \N$: contradiction.
Now to show that $\Gamma^*$ is complete, let $\phi$ be any formula. So $\phi = \phi_n$ for some $n \in \N$. If $\Gamma^* \not \vdash_L \phi$ then $\Gamma_n \not \vdash_L \phi$. So by construction $\Gamma_{n+1} \vdash_L (\lnot \phi)$. Therefore $\Gamma^* \vdash_L (\lnot \phi)$ and since $\phi$ was arbitrary this proves the statement.
\end{proof}

\begin{lemma} \label{LM:valuation}
Let $\Gamma^*$ be as above, then there is a valuation $v$ such that for every $L$-formula $\phi$
    \[ v(\phi) = T \Leftrightarrow \Gamma^* \vdash_L \phi \]
\end{lemma}

\begin{corollary}
 Suppose $\Delta$ is a set of $L$-formulas which is consistent and 
    \[\Delta \not \vdash_L \phi \quad . \]
    Then there is a valuation $v$ with 
        \[ v(\Delta) = T \text{ and } v(\phi) = F \quad. \]
\end{corollary}

\begin{proof}
 Let $\Gamma:= \Delta \cup \{ (\lnot \phi) \}$. By \ref{TH:extension}, $\Gamma$ is consistent. By the Lindenbaum lemma there is $\Gamma^*  \supseteq \Gamma$ which is consistent and such that for every $\chi$ either $\Gamma^* \vdash_L \chi \text{ or } \Gamma^* \vdash_L \lnot \chi$. By \ref{LM:valuation} there exists a valuation with $v(\Gamma^*) = T$. In particular $v(\Delta) = T$ and $v((\lnot \phi)) = T$ thus $v(\phi) = F$.
\end{proof}

\begin{theorem}[completeness/Adequacy theorem for $L$]\label{Th:completenessL}
If $v(\phi) = T$ for every valuation $v$, then $\vdash_L \phi$.
\end{theorem}

\begin{proof}
 Suppose $\not \vdash_L \phi $. then apply the corollary above with $\Delta = \emptyset$. (Why is this consistent? Soundness Theorem.) There is a valuation with $v(\phi) = F$.
\end{proof}

\begin{proof}[Proof of \ref{LM:valuation}.]
 $\Gamma^*$ consistent set of $L$-formulas such that for every $L$-formula $\phi$ either $\Gamma^* \vdash_L \phi$ or $\Gamma^* \vdash_L \lnot \phi$. Want valuation $v$ with $v(\phi)= T$ for all $\phi \in \Gamma^*$. (i.e. $v(\phi) = T \Leftrightarrow \Gamma^* \vdash_L \phi$.)
 Note that for each variable $p_i$ either $\Gamma^* \vdash_l p_i$ or $\Gamma^* \vdash_L (\lnot p_i)$. So let $v$ be the valuation with $v(p_i) = T \Leftrightarrow \Gamma^* \vdash_L p_i$.
 Now, prove by induction on the length of $\phi$ that $v(\phi) = T \Leftrightarrow \Gamma^* \vdash_L \phi$.
 
 \begin{itemize}
     \item[Base case:] $\phi$ is just a propositional variable -- this case holds by the definition of $v$.
     \item[inductive step:]
     \textbf{Case 1:} $\phi$ is $(\lnot \psi)$.
     "$\Rightarrow$": $v(\phi) = T$ then $v(\psi) = F$ and by the induction hypothesis $\Gamma^* \not \vdash_L \psi$. Then by the completeness of $\Gamma^*$, $\Gamma^* \vdash_L (\lnot \psi)$ i.e. $\Gamma^* \vdash_L \phi$.
     "$\Leftarrow$": Suppose $\Gamma^* \vdash_L \phi$. By consistency $\Gamma^* \not \vdash_L \psi $. By the induction hypothesis $v(\psi) = F$. As $v$ is a valuation we obtain $v(\phi) = T$ which concludes the first case. \\
     \textbf{Case 2:} $\phi$ is $(\psi \rightarrow \chi)$.
     "$\Rightarrow$": Suppose $v(\phi) = F$. Then $v(psi) = T$ and $v(\chi) = F$. By the induction hypothesis $\Gamma^* \vdash_L \psi$ and $\Gamma^* \not \vdash_L \chi$. If
        \[ \Gamma^* \vdash_L \phi \] then using modus ponens and$\Gamma^* \vdash \psi$ we obtain 
        \[\Gamma^* \vdash_L \chi\] which is a contradiction. So $\Gamma^* \not \vdash_L \phi$.
    "$\Leftarrow$": Suppose $\Gamma^* \not \vdash_L (\psi \rightarrow \chi) $. Then $\Gamma^* \not \vdash \chi$ (due to A1).
    Also, due to a result from above, $\Gamma^* \not \vdash_L (\lnot \psi)$. By combining these results we obtain $v(\chi) = F$ and $v(\psi) = T$ therefore $v(\phi) = F$ which concludes the induction step.
 \end{itemize}
\end{proof}

\begin{corollary}
 Suppose $\Delta$ is a set of $L$-formulas and $\phi$ is an $L$-formula. Then
 \begin{enumerate}
     \item $\Delta$ is consistent if and only if there is a valuation $v$ with $v(\Delta) =T$.
     \item $\Delta \vdash_L \phi$ if and only if for every valuation $v$ with $v(\Delta) = T$
 \end{enumerate} we have $v(\phi) = T$.
\end{corollary}
\begin{proof}
 Exercise -- deduce these from the preliminaries to \ref{Th:completenessL}. Warning: in the second statement $\Delta$ is not necessarily consistent.
\end{proof}

\begin{theorem}[Compactness Theorem for L]
Suppose $\Delta$ is a set of $L$-formulas. The following are equivalent:
\begin{enumerate}
    \item There is a valuation $v$ with $v(\Delta) = T$.
    \item For every finite subset $\Delta_0 \subseteq \Delta$ there us a valuation $w$ with $w(\Delta_0) = T$.
\end{enumerate}
\end{theorem}

\begin{proof}
By the above corollary, the first is true iff $\Delta$ is consistent.
Similarly the second holds iff every finite subset is consistent.
But if $\Delta \vdash_L \phi$ and $\Delta \vdash_L (\lnot \phi)$ then as deductions are finite (+ therefore only involves finitely many $L$-formulas in $\Delta$), for some finite $\Delta_0 \subseteq \Delta$, $\Delta_0 \vdash_L \phi$ and $\Delta_0 \vdash_L (\lnot \phi)$.
\end{proof}

\begin{exercise}
Let $P$ be the set of sequences of 
\end{exercise}
\end{document}